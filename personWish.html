<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>我的心愿单</title>
    <link rel="stylesheet" href="css/rem.css" />
    <link rel="stylesheet" href="css/iconfont.css" />
    <link href="css/swiper.min.css" rel="stylesheet" media="all" />
    <link rel="stylesheet" href="css/common.css" />
    <link rel="stylesheet" href="css/buildDetail.css" />
    <link rel="stylesheet" href="css/person.css" />
</head>
<body>
    <div class="container">
        <div class="app-wrapper">
            <div class="bck">
            </div>
			<header class="global-nav">
				<div class="primary-wrapper module-pad">
					<div class="primary-container">
						<a class="logo">
							<img src="img/logo.png" />
						</a>
						<div class="icons">
							<i class="icon iconfont icon-daohangpinlei"></i>
							<i class="icon iconfont icon-guanbi"></i>
						</div>
					</div>
					<!-- 导航 -->
					<div class="slide-navlist" id="1">
						<ul class="slidenav-cells">
							<li class="slidenav-cell">
								<a href="index.html">
									<span class="slidenav-cell-left">好友推广</span>
									<span class="slidenav-cell-right"><i class="iconfont icon-youjiantou"></i></span>									
								</a>
							</li>
							<li class="slidenav-cell">
								<a href="personGift.html" id="second">
									<span class="slidenav-cell-left">我的礼券</span>
									<span class="slidenav-cell-right"><i class="iconfont icon-youjiantou"></i></span>									
								</a>
							</li>
							<li class="slidenav-cell slidenav-active">
								<a href="personWish.html">
									<span class="slidenav-cell-left">我的心愿单</span>
									<span class="slidenav-cell-right"><i class="iconfont icon-youjiantou"></i></span>
								</a>
							</li>
							<li class="slidenav-cell">
								<a href="personNew.html">
									<span class="slidenav-cell-left">我的消息</span>
									<span class="slidenav-cell-right"><i class="iconfont icon-youjiantou"></i></span>									
								</a>
							</li>							
						</ul>
						<div class="nav-login">
							<button class="btns" id="login">登录 / 注册</button>
							<div class="login-success">
								<a href="personLoginOut.html"><img src="img/person_pic.png" /></a>
								<span id="loginOut">退出登录</span>
							</div>
							<button class="btns" id="price">快速报价</button>
							<p>热线  4008-513-228</p>
						</div>							
					</div>
				</div>
			</header>
	        <div class="app-content">
	        	<div class="app-person">
	        		<img src="img/person_pic.png" class="person-head" />
	        		<label class="person-spread">我的心愿单</label>
			    	<div class="ps-choice-1">
			    		<button class="btn btn-gold-large">已收录5个心愿</button>
			    		<button class="btn btn-black-large goToHome">探索心愿之旅</button>
			    	</div>
	        	</div>
	        </div>
        </div>
        <!-- 内容区 start	 -->
		<div class="other-point case-header">
			<span class="relate">案例心愿单</span>
			<div class="other-line"></div>
		</div>
        <div class="app-content" id="caseWishContent">
        </div>
		<div class="other-point house-header">
			<span class="relate">楼盘心愿单</span>
			<div class="other-line"></div>
		</div>
        <div class="app-content" id="house-lid">
			<div class="app-pic-list">
				<div class="app-pic-cell">
					<a href="buildList.html">
					    <img src="img/build_2.png" />
					</a>
					<div class="geo-transform">
						<span>曼哈顿</span>
						<div class="label-content">
						    <label>顶层豪宅会所</label>
						    <span>立即咨询</span>
						</div>
					</div>
				</div>
			</div>	 
			<div class="app-pic-list">
				<div class="app-pic-cell">
					<a href="buildList.html">
					    <img src="img/build_2.png" />
					</a>
					<div class="geo-transform">
						<span>曼哈顿</span>
						<div class="label-content">
						    <label>顶层豪宅会所</label>
						    <span>立即咨询</span>
						</div>
					</div>
				</div>
			</div>	 
			<div class="app-pic-list">
				<div class="app-pic-cell">
					<a href="buildList.html">
					    <img src="img/build_2.png" />
					</a>
					<div class="geo-transform">
						<span>曼哈顿</span>
						<div class="label-content">
						    <label>顶层豪宅会所</label>
						    <span>立即咨询</span>
						</div>
					</div>
				</div>
			</div>	 
		</div>
		<div class="other-point designer-header">
			<span class="relate">设计师心愿单</span>
			<div class="other-line"></div>
		</div>
		<div class="app-content" id="designer-lid">
		</div>
        <!-- 内容区 end	 -->					
		<div class="other-point">
			<span class="relate">Other  related</span>
			<div class="other-line"></div>
		</div>
		<div class="category">

		</div>	
	    <div class="footer">
	    	<img src="img/bottom-logo.png" class="footer-logo" />
		  	<div class="bottom-nav">
		  	    <span>签约合作</span>
		  	    <span>联系我们</span>
		  	    <span>工作机会</span>
		  	    <span>法律信息</span>
		  	</div>
		  	<div class="bottom-down">
		  		<span>关注 Redefining</span>
		  		<div class="bottom-logo">
		  			<img src="img/sina.png" />
		  			<img src="img/weixin.png" />
		  			<img src="img/QQ.png" />
		  		</div>
		  	</div>
		  	<p>京公网安备11010502025574 · 京ICP证150031号</p>
	    </div>
	</div>
    <div class="weui-skin_android" id="androidActionsheet" style="display: none">
        <div class="weui-mask"></div>
        <div class="weui-actionsheet">
        	<div class="shutdown">
        		<img src="img/close.png"  />
        	</div>
        	<div class="login-window">
        		<div class="login-top">
        			<label>Hi,Friends!</label>
        			<p>Welcome to Redefining Habitat</p>
        		</div>
        		<div class="login-middle">
        			<div class="login-phone">
        				<input placeholder="请输入手机号" type="text" class="phone-number" />
        				<div class="tip"></div>
        			</div>
        			<div class="login-phone">
        				<input placeholder="请输入验证码" type="text" class="phone-check" />
        				<div class="tip"></div>
        				<span class="btn-get">获取验证码</span>
        			</div>
        		</div>
                <span class="check-tips">1小时之内只能发送3次</span>	        		
        		<div class="login-bottom">
        			<button class="btn-submit" id="logins">登录</button>
        		</div>
			</div>
			<div class="price-window">
				<div class="login-top">
					<label>快速获取装修报价</label>
				</div>	 
				<div class="price-middle">
					<input type="text" placeholder="您的姓名" />
					<input type="text" placeholder="手机号" />
					<input type="text" placeholder="楼盘名称" />
					<input type="text" placeholder="房屋面积" />
				</div>
				<div class="login-bottom">
					<button class="btn-submit btn-yellow">获取报价</button>
					<p class="price-phone">免费咨询热线: 400-512-228</p>
				</div>	        		
			</div>
        </div>
	</div>
	<script id="caseListTemplate" type="text/html">
		{{if data.length!=0}}
			{{each data}}
				<div class="app-pic-list">
					<div class="app-pic-cell">
						<a href="buildList.html">
							{{if $value.information&&$value.information.appbig}}
								<img src="{{pubUrl + $value.information.appbig}}" />
							{{else}}
								<img src="" />
							{{/if}}
						</a>
						<img src="img/thumbs_up_2.png" class="thumb_up" did="case" name="{{$value.caseid}}" />
						<div class="geo-transform">
							{{if $value.information}}
							<span>{{$value.information.address}}</span>
							<div class="label-content">
								<label>{{$value.information.name}}</label>
								<span>立即咨询</span>
							</div>
							{{else}}
								<span></span>
								<div class="label-content">
									<label></label>
									<span>立即咨询</span>
								</div>
							{{/if}}
						</div>
					</div>
				</div>	 
			{{/each}} 
		{{/if}} 
	</script>
	<script id="houseListTemplate" type="text/html">
		{{if data.length!=0}}
			{{each data}}
				<div class="app-pic-list">
					<div class="app-pic-cell">
						<a href="buildList.html?id={{$value.id}}">
							<img src="{{pubUrl + $value.logo}}" />
						</a>
						<img src="img/thumbs_up_2.png" class="thumb_up" did="house" name="{{$value.id}}" />
						<div class="geo-transform">
							<span>{{$value.address}}</span>
							<div class="label-content">
								<label>{{$value.name}}</label>
								<span>立即咨询</span>
							</div>
						</div>
					</div>
				</div>	 
			{{/each}} 
		{{/if}}
	</script>
	<script id="designerListTemplate" type="text/html">
		{{if data.length!=0}}
			{{each data}}
			<div class="app-pic-list">
				<div class="app-pic-cell">
					<a href="powerDesigner.html?id={{$value.designerid}}">
						<img src="{{pubUrl + $value.information.headphoto}}" />
					</a>
					<img src="img/thumbs_up_2.png" class="thumb_up" did="designer" name="{{$value.designerid}}" />
					<div class="geo-transform">
						<span>{{$value.information.name}}</span>
						<div class="label-content">
							<label>{{$value.information.departmentId}}</label>
							<span>立即咨询</span>
						</div>
					</div>
				</div>
			</div>	 
			{{/each}} 
		{{/if}} 
	</script>
	<script type="text/javascript" src="js/zepto.min.js"></script>
	<script src="js/swiper.min.js"></script>
	<script src="js/template-web.js"></script>
	<script src="js/common.js"></script>
	<script src="js/header.js?v=1.0.1"></script>
	<script src="js/index.js?v=1.0.1"></script>
	<script src="js/login.js"></script>
	<script src="js/collect.js"></script>
	<script type="text/javascript">
		var mySwiper = new Swiper('.swiper-container',{
			loop:true,
		    pagination: {
		        el:'.swiper-pagination',
		        clickable: true,
		    },
			autoplay:1000
		});
		
		if(userInfor){
			//案例心愿单
			var caseHtml = template('caseListTemplate',findCaseAll(userInfor.uid));
			$("#caseWishContent").html(caseHtml);
			
			//楼盘心愿单
			var houseHtml = template('houseListTemplate',findHouseAll(userInfor.uid));
			$("#house-lid").html(houseHtml);

			//设计师心愿单
			var designerHtml = template('designerListTemplate',findDesignerAll(userInfor.uid));
			$("#designer-lid").html(designerHtml);
		}else{
			$(".case-header").hide();
			$(".house-header").hide();
			$(".designer-header").hide();
		}

		/* 探索心愿之旅 */
		$(".goToHome").on("click",function(){
			window.location.href = pubUrl + "/homesMobile/index.html";
		})

		/*心愿单*/
		userInfor && house_collect(userInfor.uid);

		$(document).on('click','.thumb_up',function(){
			if(userInfor == null){
				$('#iosDialog2').fadeIn();
			}else{
				var url = "",obj={};
				if($(this).attr('did')=="case"){
					url = "/case/collect";
					obj = {
						caseid:$(this).attr('name'),
						uid:userInfor.uid
					}
				}else if($(this).attr('did')=="house"){
					url = "/house/collect";
					obj = {
						hid:$(this).attr('name'),
						uid:userInfor.uid
					}
				}else if($(this).attr('did')=="designer"){
					url = "/designer/collect";
					obj = {
						desid:$(this).attr('name'),
						uid:userInfor.uid
					}
				}
				$(this).attr('src','img/thumbs_up_1.png');
				$('#toast').fadeIn(100).find('.weui-toast__content').text('已移出心愿单');
				heartTip(url,obj);
				setTimeout(function () {
					$('#toast').fadeOut(100);
				}, 2000);
			}
		});    
        /*底部菜单*/
	   footerImg()
	   
	   //查询所有案例
		function findCaseAll(uid){
			var list = {pubUrl:pubUrl};
			$.ajax({
				type: 'post',
				data:{uid:uid},
				url: pubUrl + '/case/collect/all',
				dataType: 'json',
				async: false,
				success: function(data){
					if(data.length==0){
						$(".case-header").hide();
					}
					list.data = data
				},
				error: function(err){
					console.log(err)
				}
			});	
			return list
		}

		//查询所有楼盘
		function findHouseAll(uid){
			var list = {pubUrl:pubUrl};
			$.ajax({
				type: 'post',
				data:{uid:uid},
				url: pubUrl + '/center/house_collect_list',
				dataType: 'json',
				async: false,
				success: function(data){
					if(data.length==0){
						$(".house-header").hide();
					}
					list.data = data
				},
				error: function(err){
					console.log(err)
				}
			});	
			return list
		}
	
		//查询所有设计师
		function findDesignerAll(uid){
			var list = {pubUrl:pubUrl};
			$.ajax({
				type: 'post',
				data:{uid:uid},
				url: pubUrl + '/designer/collect/all',
				dataType: 'json',
				async: false,
				success: function(data){
					if(data.length==0){
						$(".designer-header").hide();
					}
					list.data = data;
				},
				error: function(err){
					console.log(err)
				}
			});	
			return list
		}
	</script>
</body>
</html>